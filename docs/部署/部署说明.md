# 部署说明

## 一、环境依赖

### Docker Compose 启动

```bash
cd docs/部署/environment
docker-compose up -d
```

包含的服务：
- MySQL 8.0
- Redis 7.x
- Elasticsearch 7.x（可选）

### 服务端口

| 服务 | 端口 |
|------|------|
| MySQL | 3306 |
| Redis | 6379 |
| Elasticsearch | 9200 |
| MinIO | 9000/9001 |

## 二、应用部署

### 方式1：直接运行

```bash
# 打包
mvn clean package -DskipTests

# 运行
java -jar target/zhizhi-1.0.jar --spring.profiles.active=dev
```

### 方式2：Docker部署

```bash
cd docs/部署/app

# 启动
./start.sh

# 停止
./stop.sh
```

## 三、配置说明

主要配置文件：`application-dev.yml`

### 数据库
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/zhizhi
    username: root
    password: 123456
```

### Redis
```yaml
sa-token:
  alone-redis:
    host: 127.0.0.1
    port: 6379
```

### Elasticsearch（可选）
```yaml
spring:
  elasticsearch:
    enabled: true  # 不使用时设为false
    uris: localhost:9200
```

### MinIO（可选）
```yaml
minio:
  enabled: true  # 不使用时设为false
  url: http://localhost:9000
  accessKey: admin
  secretKey: superadmin
```

## 四、健康检查

```bash
# 应用状态
curl http://localhost:8091/actuator/health

# API文档
http://localhost:8091/doc.html
```
